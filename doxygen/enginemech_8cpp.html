<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CoreNEURON: /home/travis/build/BlueBrain/CoreNeuron/coreneuron/mechanism/mech/enginemech.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CoreNEURON
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('enginemech_8cpp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">enginemech.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides interface function for CoreNEURON mechanism library and NEURON.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides interface function for CoreNEURON mechanism library and NEURON. </p>
<p>libcorenrnmech is a interface library provided to building standalone executable special-core. Also, it is used by NEURON to run CoreNEURON via dlopen to execute models via in-memory transfer. </p>

<p>Definition in file <a class="el" href="enginemech_8cpp_source.html">enginemech.cpp</a>.</p>
</div><div class="textblock"><code>#include &lt;cstdlib&gt;</code><br />
<code>#include &lt;coreneuron/engine.h&gt;</code><br />
</div>
<p><a href="enginemech_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacecoreneuron"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoreneuron.html">coreneuron</a></td></tr>
<tr class="memdesc:namespacecoreneuron"><td class="mdescLeft">&#160;</td><td class="mdescRight">When we use solve methods like euler, newton or kinetic schemes, the state/current updates function need to call solver methods defined in coreneuron. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acf04e07dee429cb0ef0b0be7d0eaa664"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoreneuron.html#acf04e07dee429cb0ef0b0be7d0eaa664">coreneuron::modl_reg</a> ()</td></tr>
<tr class="memdesc:acf04e07dee429cb0ef0b0be7d0eaa664"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mechanism registration function.  <a href="namespacecoreneuron.html#acf04e07dee429cb0ef0b0be7d0eaa664">More...</a><br /></td></tr>
<tr class="separator:acf04e07dee429cb0ef0b0be7d0eaa664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66ef352f77c5506a18125082c337607"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoreneuron.html#af66ef352f77c5506a18125082c337607">coreneuron::nrn_cleanup_ion_map</a> ()</td></tr>
<tr class="memdesc:af66ef352f77c5506a18125082c337607"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup global ion map created during mechanism registration.  <a href="namespacecoreneuron.html#af66ef352f77c5506a18125082c337607">More...</a><br /></td></tr>
<tr class="separator:af66ef352f77c5506a18125082c337607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1152cde62b9b764ab2d22ee3eb75cbab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enginemech_8cpp.html#a1152cde62b9b764ab2d22ee3eb75cbab">solve_core</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a1152cde62b9b764ab2d22ee3eb75cbab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize mechanisms and run simulation using CoreNEURON.  <a href="#a1152cde62b9b764ab2d22ee3eb75cbab">More...</a><br /></td></tr>
<tr class="separator:a1152cde62b9b764ab2d22ee3eb75cbab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2d760bbb84e11fec9fb5951f9eebf6"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enginemech_8cpp.html#a9a2d760bbb84e11fec9fb5951f9eebf6">prepare_args</a> (int &amp;argc, char **&amp;argv, int use_mpi, const char *nrn_arg)</td></tr>
<tr class="memdesc:a9a2d760bbb84e11fec9fb5951f9eebf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">parse arguments from neuron and prepare new one for coreneuron  <a href="#a9a2d760bbb84e11fec9fb5951f9eebf6">More...</a><br /></td></tr>
<tr class="separator:a9a2d760bbb84e11fec9fb5951f9eebf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaf5b9245f128ff3de5657300e0e9272"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enginemech_8cpp.html#adaf5b9245f128ff3de5657300e0e9272">mk_mech_init</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:adaf5b9245f128ff3de5657300e0e9272"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize standard mechanisms from coreneuron  <a href="#adaf5b9245f128ff3de5657300e0e9272">More...</a><br /></td></tr>
<tr class="separator:adaf5b9245f128ff3de5657300e0e9272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f1e97a1585c741be8dd0603e4e6f8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enginemech_8cpp.html#a55f1e97a1585c741be8dd0603e4e6f8f">set_openmp_threads</a> (int nthread)</td></tr>
<tr class="memdesc:a55f1e97a1585c741be8dd0603e4e6f8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">set openmp threads equal to neuron's pthread  <a href="#a55f1e97a1585c741be8dd0603e4e6f8f">More...</a><br /></td></tr>
<tr class="separator:a55f1e97a1585c741be8dd0603e4e6f8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a02b907d2f5d3f7a6b77864effe5a87"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enginemech_8cpp.html#a2a02b907d2f5d3f7a6b77864effe5a87">corenrn_embedded_run</a> (int nthread, int have_gaps, int use_mpi, int use_fast_imem, const char *nrn_arg)</td></tr>
<tr class="memdesc:a2a02b907d2f5d3f7a6b77864effe5a87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run CoreNEURON in embedded mode with NEURON.  <a href="#a2a02b907d2f5d3f7a6b77864effe5a87">More...</a><br /></td></tr>
<tr class="separator:a2a02b907d2f5d3f7a6b77864effe5a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a43effd075429a89d6fb7492cb4b0c980"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoreneuron.html#a43effd075429a89d6fb7492cb4b0c980">coreneuron::nrn_have_gaps</a></td></tr>
<tr class="memdesc:a43effd075429a89d6fb7492cb4b0c980"><td class="mdescLeft">&#160;</td><td class="mdescRight">variables defined in coreneuron library  <a href="namespacecoreneuron.html#a43effd075429a89d6fb7492cb4b0c980">More...</a><br /></td></tr>
<tr class="separator:a43effd075429a89d6fb7492cb4b0c980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf02faede26cdf8ed69e698bee774219"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoreneuron.html#aaf02faede26cdf8ed69e698bee774219">coreneuron::nrn_use_fast_imem</a></td></tr>
<tr class="separator:aaf02faede26cdf8ed69e698bee774219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa10a6153917eec8329274dddf5693024"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enginemech_8cpp.html#aa10a6153917eec8329274dddf5693024">corenrn_embedded</a></td></tr>
<tr class="memdesc:aa10a6153917eec8329274dddf5693024"><td class="mdescLeft">&#160;</td><td class="mdescRight">global variables from coreneuron library  <a href="#aa10a6153917eec8329274dddf5693024">More...</a><br /></td></tr>
<tr class="separator:aa10a6153917eec8329274dddf5693024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a019242357443e08935de1c59730b5ab7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enginemech_8cpp.html#a019242357443e08935de1c59730b5ab7">corenrn_embedded_nthread</a></td></tr>
<tr class="separator:a019242357443e08935de1c59730b5ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2a02b907d2f5d3f7a6b77864effe5a87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int corenrn_embedded_run </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nthread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>have_gaps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_mpi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_fast_imem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>nrn_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run CoreNEURON in embedded mode with NEURON. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nthread</td><td>Number of Pthreads on NEURON side </td></tr>
    <tr><td class="paramname">have_gaps</td><td>True if gap junctions are used </td></tr>
    <tr><td class="paramname">use_mpi</td><td>True if MPI is used on NEURON side </td></tr>
    <tr><td class="paramname">use_fast_imem</td><td>True if fast imembrance calculation enabled </td></tr>
    <tr><td class="paramname">nrn_arg</td><td>Command line arguments passed by NEURON </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if embedded mode is used otherwise 0 </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Change return type semantics </dd></dl>

<p>Definition at line <a class="el" href="enginemech_8cpp_source.html#l00072">72</a> of file <a class="el" href="enginemech_8cpp_source.html">enginemech.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="adaf5b9245f128ff3de5657300e0e9272"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mk_mech_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize standard mechanisms from coreneuron </p>

<p>Definition at line <a class="el" href="main1_8cpp_source.html#l00430">430</a> of file <a class="el" href="main1_8cpp_source.html">main1.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9a2d760bbb84e11fec9fb5951f9eebf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* prepare_args </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&amp;&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_mpi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>parse arguments from neuron and prepare new one for coreneuron </p>
<p>parse arguments from neuron and prepare new one for coreneuron </p>

<p>Definition at line <a class="el" href="main1_8cpp_source.html#l00100">100</a> of file <a class="el" href="main1_8cpp_source.html">main1.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a55f1e97a1585c741be8dd0603e4e6f8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_openmp_threads </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nthread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set openmp threads equal to neuron's pthread </p>
<p>set openmp threads equal to neuron's pthread</p>
<p>If there are a number of mpi processes on this node as well, things can go very slowly as there are so many more threads than cores. Assume the NEURON users pc.nthread() is well chosen if OMP_NUM_THREADS is not set. </p>

<p>Definition at line <a class="el" href="main1_8cpp_source.html#l00088">88</a> of file <a class="el" href="main1_8cpp_source.html">main1.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1152cde62b9b764ab2d22ee3eb75cbab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int solve_core </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize mechanisms and run simulation using CoreNEURON. </p>
<p>This is mainly used to build nrniv-core executable </p>

<p>Definition at line <a class="el" href="enginemech_8cpp_source.html#l00039">39</a> of file <a class="el" href="enginemech_8cpp_source.html">enginemech.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aa10a6153917eec8329274dddf5693024"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool corenrn_embedded</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>global variables from coreneuron library </p>
<p>global variables from coreneuron library </p>

<p>Definition at line <a class="el" href="nrn__setup_8cpp_source.html#l00061">61</a> of file <a class="el" href="nrn__setup_8cpp_source.html">nrn_setup.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a019242357443e08935de1c59730b5ab7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int corenrn_embedded_nthread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="nrn__setup_8cpp_source.html#l00062">62</a> of file <a class="el" href="nrn__setup_8cpp_source.html">nrn_setup.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <ul>
    <li class="navelem"><a class="el" href="dir_6ec67863a14f3de15fa0e88094f8441e.html">coreneuron</a></li><li class="navelem"><a class="el" href="dir_27bbf3eab66f523174ea8852d5f0bb6f.html">mechanism</a></li><li class="navelem"><a class="el" href="dir_1108496b15d49c987c0ffe6f674609e0.html">mech</a></li><li class="navelem"><a class="el" href="enginemech_8cpp.html">enginemech.cpp</a></li>
  </ul>
</div>
<hr class="footer"/>
<address class="footer">
    <small>
    </small>
</address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
